---
title: "Data Tidying"
author: "Jessica Ernakovich"
date: "1/16/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Loading packages
We need to call these packages when they are needed for a program, even though it's installed  
It's good practice to include all your library calls in one chunk  



```{r, warming = F, message = F}

library(dplyr)
library(tidyr) 

```

this will give a warning message about certain packages because their names are redundant to this package and others. By default, RStudio will assume you want to call the function from the most recently loaded library. 

If necessary, you can call from the other package using the package_name::function_name(...)



Read in the datafile
```{r}
catch_df <- read.csv(url("https://knb.ecoinformatics.org/knb/d1/mn/v2/object/df35b.302.1", method = "libcurl"),
                    stringsAsFactors = FALSE)
head(catch_df)
```
cmd + shift + M will result in `%>%`, the pipe operator (which allows operations to be linked)

* remove marginal sum and notes column
* move from wide to long format

```{r}

catch_long <- catch_df %>% 
  select(Region, Year, Chinook, Sockeye, Coho, Pink, Chum) %>% 
  gather(key = "species", value = "catch", -Year, -Region)

#including function calls on new lines makes this cleaner, but is unnecessary
#could also have used "-" to just drop the columns we wanted to get rid of. 

head(catch_long)

```
If `<-` reads as "gets" and ` %>%` reads as "then", then the first two lines above read: catch_cleaned gets the catch_df then a select of the catch_df.



```{r}
catch_cleaned <- catch_long %>% 
  rename(catch_thousands = catch) #%>% 
  #mutate(catch = catch_thousands * 1000)

head (catch_cleaned)
```

There are some values in the catch_thousands column that are not integers, but rather text. So, we are trying to find and force to be integers. But, it didn't work. So then we looked for it with the "which" command. And then we visualized it. Next, we will change this to a number. 
```{r}
test_catch <- as.integer(catch_cleaned$catch_thousands) #trying to force to be integers, but it delivers that "NAs are introduced by coercion"

i <- which(is.na(test_catch) ==T) #this will return whatever value is true for this
catch_cleaned[i, ]   #[row i, all colums] so we can find the problem


```



# Data Cleaning


# Split-Apply-Combine


# Joins
